<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://www.gstatic.com/firebasejs/ui/6.0.1/firebase-ui-auth.js"></script>
<link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/6.0.1/firebase-ui-auth.css" />
    <title>Google Keep</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="shortcut icon" href="https://www.gstatic.com/images/branding/product/1x/keep_2020q4_48dp.png" type="image/x-icon">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="firebaseui-auth-container">

    </div>
    <div id="app">
        <div class="navbar">
            <div class="navbar-left">
                <div class="tooltip">
                  <span class="material-icons hover">
                        menu
                        </span>
                        <span class="tooltip-text">Main Menu</span>
                </div>
            
            
               
                 
               <span><img src="https://www.gstatic.com/images/branding/product/1x/keep_2020q4_48dp.png"/></span> 
                <span class="text-logo">Keep</span>
            </div>
            <div class="searchbar">
                <span class="material-icons hover">
                    search
                    </span>
                <input type="search" placeholder="Search" />
            </div>
            <div class="navbar-right">
                <div class="p1">
                    <div class="tooltip">
                        <span class="material-icons hover">
                            refresh
                            </span>
                        <span class="tooltip-text">Refresh</span>
                    </div>
            
                    <div class="tooltip">
                        <span class="material-icons hover">
                            view_agenda
                            </span>
                        <span class="tooltip-text">List view</span>
                    </div>
                    
                        <div class="tooltip">
                            <span class="material-icons hover">
                                settings
                                </span>
                            <span class="tooltip-text">settings</span>
                        </div>
                        
                </div>
                
                            <div class="p2">
            <span class="material-icons hover" >
                                apps
                                </span>

                               <div class=" logout">
                                <span class="material-icons hover" >
                                    account_circle
                            
                                    </span><p class="auth-user"></p>
                                     
                              </div>
                            </div>
                            
            
            </div>
                </div>
                <div class="left-sidebar">
            <div class="left">
                <div class="sidebar-item active">
                
                    <span class="material-icons  ">
                       lightbulb_outline
                       </span> 
                   <span class="ul-p1">Notes</span>
               </div>
               <div class="sidebar-item">
                   <span class="material-icons ">
                       notifications_none
                       </span> <span class="ul-p1">Reminder</span>
               
               </div>
               <div class="sidebar-item">
                   <span class="material-icons ">
                       edit
                       </span>
                   <span class="ul-p1">Edit labels</span>
                   
               </div>
               <div class="sidebar-item">
                <span class="material-icons ">
                   archive
                   </span>
                   <span class="ul-p1">
                       Archive
                   </span>
                   </div>
               <div class="sidebar-item"><span class="material-icons ">
                   delete_outline
                   </span>
               <span class="ul-p1">Trash</span>
               </div>
               
               
            </div>
 </ul>
                   
            
                    
                </div>
                 <div class="right-sidebar">
                    <div class="note-box inactive-form">
                       
                        <input type="text" placeholder="Take a note..." class="note-text1" />
                        <div class="search-icon">
                            <span class="material-icons hover">
            check_box
            </span>
                                <span class="material-icons hover">
                                    edit
                                    </span>
                                    <span class="material-icons hover">
                                        image
                                        </span>
                                        
            
                        </div>
                        <br> <br>
                       
                    </div>
            
                    <div class="modal open-model">
                        <div class="modal-content">
                        
                            <div class=" active-form ">
                                   <form id="form">
                                <input type="text" class="note-title" placeholder="title" >
                                <input type="text" class="note-text" placeholder="Take a note...">
                                
                                <div class="search-icon1">
                                
                                     <span class="material-icons">
                                         add_alert
                                         </span>
                                         <span class="material-icons">
                                             group_work
                                             </span>
                                             <span class="material-icons">
                                                 color_lens
                                                 </span>
                                                 <span class="material-icons">
                                                     image
                                                     </span>
                                                     <span class="material-icons hover">
                                                         archive
                                                         </span>
                                                         <span class="material-icons">
                                                             more_vert
                                                             </span>
                                                             <span class="material-icons">
                                                                 undo
                                                                 </span>
                                                                 <span class="material-icons">
                                                                     redo
                                                                     </span>
                                                                     <span class="btn"><button class="closebtn" type="submit">Close</button></span>
                                                 
                                 </div>
                               
                                </form>
                             </div>
                        </div>
                        
                      
                       
                    </div><br>
                    
                    <div class="note">
                      
                        <div class=" active-form2 ">
                            <span class="material-icons check-circle">
                                check_circle
                                </span>
                                <br>
                       <div class="title">Title</div>
                       <br>
                       <div class="text">Text</div>
                           <div class="search-icon11">
                            
                                 <span class="material-icons">
                                     add_alert
                                     </span>
                                     <span class="material-icons">
                                         group_work
                                         </span>
                                         <span class="material-icons">
                                             color_lens
                                             </span>
                                             <span class="material-icons">
                                                 image
                                                 </span>
                                                 <span class="material-icons hover">
                                                     archive
                                                     </span>
                                                     <span class="material-icons">
                                                         more_vert
                                                         </span>       
                             </div>
                            </div>
                        </div>
                         </div>
                    </div>
                  
                </div>
            </div>

 <script defer src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>

 <script defer src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
 <script defer src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
 
     
     <script  type="module">
       

        const firebaseConfig = {
            apiKey: "AIzaSyBGH_g96dUa7PivIesS26TkBb2RwTa1V5w",
  authDomain: "keep-e5a9f.firebaseapp.com",
  projectId: "keep-e5a9f",
  storageBucket: "keep-e5a9f.appspot.com",
  messagingSenderId: "323665114649",
  appId: "1:323665114649:web:15946d89175a568467dc88"
        }; 
    
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig); 
 const auth= firebase.auth();

// Initialize Cloud Firestore and get a reference to the service
const db = firebase.firestore();
 console.log(db);   
 
 


 class Auth{
  constructor(){
    this.ui = new firebaseui.auth.AuthUI(auth);
     this.$firebaseAuthContainer=document.querySelector("#firebaseui-auth-container");
     this.$app =document.querySelector("#app");
    this.$app.style.display="none";
    this.$authUserText=document.querySelector(".auth-user");
    this.$selectedNoteId="";
    this.userId="";
    this.handleAuth();

    

}



redictTOAuth(){
 
    this.$firebaseAuthContainer.style.display="block";
  this.$app.style.display="none";
   this.ui.start('#firebaseui-auth-container', {
    callbacks: {
    signInSuccessWithAuthResult: function(authResult, redirectUrl) {
      // User successfully signed in.
      // Return type determines whether we continue the redirect automatically
      // or whether we leave that to developer to handle.
     // this.userId=authResult.user;
     console.log("authResult",authResult.user);
     this.userId=authResult.user;
          this.$authUserText.innerHTML=user.displayName;
         this.redirectToApp();
     
      return true;
    }
    },
        signInOptions: [
         firebase.auth.EmailAuthProvider.PROVIDER_ID,
         firebase.auth.GoogleAuthProvider.PROVIDER_ID,
        ],
          // Other config options...
     });
}
redirectToApp(){
   this.$firebaseAuthContainer.style.display="none";
   this.$app.style.display="block";
   this.fetchNoteFormDb();
}


fetchNoteFormDb(){
        var docRef = db.collection("users").doc("this.userId");
   docRef.get().then((doc) => {
      if (doc.exists) {
           console.log("Document data:", doc.data().notes);
           this.notes =doc.data().notes;
           this.displayNote();
      } else {
            //doc.data() will be undefined in this case
         console.log("No such document!");
         db.collection("users").doc(this.userId).set({
            notes : []
             
         })
         .then(() => {
             console.log("user successfully written!");
         })
         .catch((error) => {
             console.error("Error writing document: ", error);
         });
      }
   }).catch((error) => {
   //    cons ole.log("Error getting document:", error);
   });    
       }

    }
const authForm =new Auth();

      </script>
 <script>

 </script>
    <script  src="index.js"></script> 

      <script src="https://cdnjs.cloudflare.com/ajax/libs/cuid/1.3.8/browser-cuid.min.js" referrerpolicy="no-referrer"></script>
    </body>


</html>